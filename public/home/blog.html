<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Kadr.live | Online Dispute Resolution Platform</title>
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<!-- REVOLUTION STYLE SHEETS -->
		<link rel="stylesheet"  href="revslider/css/rs6.css">
		<!-- FLIP CARD STYLE SHEETS -->
		<link rel="stylesheet"  href="css/flip.card.css">
		<!-- Typography CSS -->
		<link rel="stylesheet" href="css/typography.css">
		<!-- Style -->
		<link rel="stylesheet" href="css/sofbox-style.css">
		<!-- Responsive -->
		<link rel="stylesheet" href="css/responsive.css">
		<!-- Variable-color -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
        <link rel="manifest" href="images/site.webmanifest">
        <link rel="mask-icon" href="images/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
        <script src="https://unpkg.com/vue@3.5.13/dist/vue.global.prod.js"></script>
        <meta name="theme-color" content="#ffffff">
		<style>
            .hidden {
              display: none;
            }
            .visible {
              display: inline;  
            }
			.limited-text {
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 5;
				overflow: hidden;
				text-overflow: ellipsis;
			}
			.tag-pill {
				display: inline-block;
				padding: 5px 10px;
				margin: 5px;
				background-color: #ffead0;
				color: black;
				border-radius: 25px;
				font-size: 14px;
				text-decoration: none;
			}
			
			.tag-pill:hover {
				background-color: #b0591e;
				color:white;
				text-decoration: none;
			}
			.link-button-brown {
				background: none;
				border: none;
				text-decoration: underline;
				cursor: pointer;
				font-size: inherit;
			}
			.link-button-brown:hover {
				color:white !important
			}
			.link-button {
				background: none;
				border: none;
				text-decoration: underline;
				cursor: pointer;
				font-size: inherit;
			}
			.link-button:hover {
				color:#b0591e !important
			}
			.spinner-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(255, 255, 255, 0.8); /* Slightly opaque white */
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 9999; /* Ensure itâ€™s above everything */
				backdrop-filter: blur(5px); /* Blur effect for background */
			}
			/* Spinner animation */
			.spinner {
				width: 50px;
				height: 50px;
				border: 5px solid #f3f3f3; /* Light gray */
				border-top: 5px solid #3498db; /* Blue */
				border-radius: 50%;
				animation: spin 1s linear infinite;
				top: 50%;
				left: 50%;
				position: relative;
			}

			/* Keyframes for the spinning animation */
			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}
        </style>
	</head>
	<body id="app">
		<div class="spinner-overlay" id="spinner">
			<div class="spinner"></div>
		</div>		
		<!-- loading -->
		<div id="loading">
         <div id="loading-center">
            <img src="images/loader.gif" alt="loader">
         </div>
      </div>
		<!-- loading End -->
		<!--================================= -->
		<!-- Header -->
		<header id="main-header">
			<div class="container">
				<div class="row">
					<div class="col-sm-12">
						<nav class="navbar navbar-expand-lg navbar-light">
							<a class="navbar-brand" href="index.html">
								<img class="img-fluid" src="images/logo.png" alt="img">
							</a>
							<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="menu-btn d-inline-block" id="menu-btn">
								<span class="line"></span>
								<span class="line"></span>
								<span class="line"></span>
							</span>
							<span class="ion-navicon"></span>
							</button>
							<div class="collapse navbar-collapse" id="navbarSupportedContent">
								<ul class="navbar-nav mr-auto w-100 justify-content-end">
									<li class="nav-item">
										<a class="nav-link" href="index.html#iq-home">Home</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="index.html#iq-feature">Why Us?</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="index.html#iq-getstarted">Get Started</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="index.html#iq-joinexpert">Join Experts</a>
									</li>
									<li class="nav-item">
										<a class="nav-link active" href="blog.html">Blog</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="index.html#iq-contact">Contact Us</a>
									</li>
								</ul>
							</div>
							<div class="sub-main">
								<ul class="shop_list">
									<li class="search-btn list-inline-item" style="display:none;">
										<div class="search-box">
											<form method="get" class="search-form" action="https://iqonic.design/wp-themes/sofbox/">
												<label for="search-form-5e7adc86eded3">
													<span class="screen-reader-text">Search for:</span>
												</label>
												<input type="search" id="search-form-5e7adc86eded3" class="search-field" placeholder="Search" value="" name="s">
												<button type="submit" class="search-submit"><i class="fa fa-search"></i><span class="screen-reader-text">Search</span></button>
											</form>
										</div>
									</li>
									<li class="cart-btn">
										<a :href="ADMIN_BASE_URL" target="_self" class="login-register-button hidden" :class="[isLoginSession ? 'visible' : '']">
											<i class="flaticon flaticon-user-silhouette flicons1 iconcolor1" style="color:white;margin-right:10px"></i>
											<span class="button-text">My Account</span>
										</a>
										<a :href="ADMIN_BASE_URL" target="_self" class="login-register-button hidden"  :class="[isLoginSession === false ? 'visible' : '']">
											<span class="button-text">Login/Register</span>
										</a>
										<div class="cart_count"  style="display:none;">
											<a class="parents mini-cart-count" href="https://iqonic.design/wp-themes/sofbox/cart/">
												<i class="fa fa-shopping-cart"></i>
												<div id="mini-cart-count">
													0
												</div>
											</a>
										</div>
									</li>
								</ul>
							</div>
						</nav>
					</div>
				</div>
			</div>
		</header>
		<!-- Header End -->
		<div class="text-left iq-breadcrumb-one iq-bg-over">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-sm-12">
						<nav aria-label="breadcrumb" class="text-center iq-breadcrumb-two">
							
						</nav>
					</div>
				</div>
			</div>
		</div>
		<!-- Main Content -->
		<div class="main-content">
			<div class="row" style="padding-top: 50px;">
				<h3 style="text-align: center;width: 100%;">{{title}}</h3>
			</div>
			<section style="padding:50px 0">
				<div class="container">
					<div class="row">
						<div class="col-lg-8 col-sm-12" v-if="allBlogs && allBlogs.length==0">
							<lottie-player src="https://lottie.host/69175f47-4a2b-4c03-bbc0-2bed5bcd73c9/RoEC8fQSmI.json" background="transparent"  speed="1"  style="width: 100%; height: 300px" loop autoplay></lottie-player>
							<h4 style="text-align: center;width: 100%;">No blog found...</h4>
						</div>
						<div class="col-lg-8 col-sm-12" v-else>
							<div class="iq-blog-box" v-for="(blog,index) in allBlogs" :key="index">
								<div class="iq-blog-detail">
									<div class="iq-blog-meta">
										<ul>
											<li class="list-inline-item" style="left:20px;background:white; border:1px solid #e4e4e4; border-radius: 15px;">
												<span href="#" rel="bookmark">November 28, 2019</a>
											</li>
											<li class="list-inline-item" style="right: 20px;left:unset;background:white;  border-radius: 15px;">
												<a class="link-button" @click="onClickAuthor(blog.author_id,blog.author_name)" class="author-name">Author: {{blog.author_name}}</a>
											</li>
										</ul>
									</div>
									<div class="blog-title" style="margin-top: 4rem;">
										<a :href="'/blog-details.html?id='+blog.id">
											<h5 class="mb-2">{{blog.title}}</h5>
										</a>
									</div>
									<p class="mb-0 limited-text" v-html="stripHtmlTags(blog.content)"></p>
									<div class="tags-container">
										<a href="#" class="tag-pill" @click="onClickTag(tag.id,tag.name)" v-for="(tag, index) in blog.tags" :key="tag">{{tag.name}}</a>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-lg-12">
									<div class="pagination justify-content-center">
										<nav aria-label="Page navigation">
											<ul class="page-numbers justify-content-center">
												<li v-if="pageNo != 1">
													<a class="next page-numbers link-button-brown" @click="onPreviousPage"><span aria-hidden="true">Previous page</span></a>
												</li>
												<li v-for="page in totalPage">
													<span aria-current="page" class="page-numbers current" v-if="pageNo == page">{{page}}</span>
													<span aria-current="page" class="page-numbers" v-else @click="onClickPage(page)">{{page}}</span>
												</li>
												<li v-if="pageNo != totalPage">
													<a class="next page-numbers link-button-brown" @click="onNextPage"><span aria-hidden="true">Next page</span></a>
												</li>
											</ul>
										</nav>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-12 sidebar-service-right mt-5 mt-lg-0">
							<div id="search-2" class="widget widget_search">
								<form @submit.prevent="onSearch" class="search-form">
									<label for="search-form-5e82f753d374f">
										<span class="screen-reader-text">Search for:</span>
									</label>
									<input type="search"  class="search-field mb-5" placeholder="Search" v-model="searchQuery" name="s">
									<button type="submit" class="search-submit" style="background:#b0591e"><i class="fa fa-search"></i><span class="screen-reader-text">Search</span></button>
								</form>
								<div class="categories mt-5">
									<h4 class="mb-3">Categories</h4>
									<ul>
										<li class="cat-item">
											<a @click="getAllBlogs()" class="link-button">All</a><span class="post_count"> {{totalBlogs}} </span>
										</li>
										<li class="cat-item" v-for="(category,index) of blogCategories">
											<a @click="onClickCategory(category.id,category.name)" class="link-button">{{category.name}}</a><span class="post_count"> {{category._count.blog_categories}} </span>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
		<!-- Main Content END -->
		<!-- Footer Start -->
		<footer  class="iq-footer iq-border-top footerbg3" >
			<div class="container">
				<div class="row">
					<div class="col-lg-4 col-md-6 col-sm-6  iq-rmb-50">
						<div class="logo">
							<a href="index.html"><img class="img-fluid" src="images/logo.png" alt="img"></a>
							<p class="mt-5 text-white">Subscribe to our newsletter</p>
							<input type="email" placeholder="Email"/>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 mt-4 mt-lg-0 mt-md-0">
						<h5 class="mb-4 heading">Information</h5>
						<ul class="menu">
							<li><a href="javascript:void(0)" class="anchor">Home</a></li>
							<li><a href="faq.html" class="anchor">FAQ</a></li>
							<li><a href="privacy-policy.html" class="anchor">Privacy Policy</a></li>
							<li><a href="terms-and-conditions.html" class="anchor">Terms & Conditions</a></li>
							<li><a href="javascript:void(0)" class="anchor">Contact Us</a></li>
						</ul>
					</div>
					<div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
						
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4">
						<h5 class="mb-4 heading">Quick Links</h5>
						<ul class="menu">
							<li>
								<a href="tel:+91999999999" class="anchor"><i class="fa fa-phone fa1"></i><span class="spanpadding">+91 999999999</span></a>
							</li>
							<li>
								<a href="mailto:contact@kadr.live" class="anchor"><i class="fa fa-envelope fa1"></i><span class="spanpadding">Contact@Kadr.live</span></a>
							</li>
							<li>
								<a class="anchor"><i class="fa fa-home fa1"></i><span class="spanpadding">Delhi</span></a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<hr>
			<div class="copyright-footer">
				<div class="container">
					<div class="pt-3 pb-3">
						<div class="row flex-row-reverse justify-content-between">
							<div class="col-lg-6 col-md-12 text-lg-right text-md-center text-center">
								<span class="copyright text-white">Copyright 2024 KADR.live | All Rights Reserved.</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- back-to-top -->
			<div id="back-to-top" style="">
				<a class="top" id="top" href="#top"> <i class="ion-ios-arrow-up"></i> </a>
			</div>
			<!-- back-to-top End -->
		</footer>
		<!-- Footer End -->
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="js/jquery-3.4.1.js" ></script>
		<!-- jQuery  for scroll me js -->
		<script src='js/jquery-min.js'></script>
		<!-- popper  -->
		<script src="js/popper.min.js"></script>
		<!--  bootstrap -->
		<script src="js/bootstrap.min.js" ></script>
		<!-- Appear JavaScript -->
		<script src="js/appear.js"></script>
		<!-- Circle Progress -->
		<script src="js/circle-progress.min.js"></script>
		<!-- isotope -->
		<script src="js/isotope.pkgd.min.js"></script>
		<!-- Countdown -->
		<script src="js/jquery.countdown.min.js"></script>
		<!-- countTo JavaScript -->
		<script src="js/jquery.countTo.js"></script>
		<!-- Magnific Popup JavaScript -->
		<script src="js/jquery.magnific-popup.min.js"></script>
		<!-- scrollme -->
		<script src="js/jquery.scrollme.min.js"></script>
		<!-- Owl Carousel JavaScript -->
		<script src="js/owl.carousel.min.js"></script>
		<!-- parallax -->
		<script src="js/parallax.min.js"></script>
		<!-- semantic-ui -->
		<script src="js/semantic-ui-range.js"></script>
		<!-- skrollr -->
		<script src="js/skrollr.js"></script>
		<!-- skrollr -->
		<script src="js/slick.min.js"></script>
		<!-- skrollr -->
		<script src="js/sofbox-custom.js"></script>
		<!-- skrollr -->
		<script src="js/swiper.min.js"></script>
		<!-- Wow -->
		<script src="js/wow.min.js"></script>
		<script>
			var data;
			Vue.createApp({
			   data: function(){
				   return{
					   ADMIN_BASE_URL : '',
					   WHATSAPP_PHONE_NUMBER : '',
					   isLoginSession: false,
					   pageNo: 1,
					   allBlogs: null,
					   blogCategories: [],
					   totalPage: 0,
					   searchQuery: '',
					   totalPerPage: 10,
					   extraParams:'',
					   totalBlogs: 0,
					   title: 'All Blogs - Page 1'
				   }
			   },
			   methods: {
				getAllBlogs(){
					this.title = `All Blogs - Page 1`
					this.pageNo = 1
					this.extraParams = ``
					this.updateURLParam(null,null);
					this.getBlogs()
				},
				onSearch(){
					this.title = `Search result for ${this.searchQuery} - Page ${this.pageNo}`
					this.pageNo = 1
					this.extraParams = `search=${this.searchQuery}`
					this.updateURLParam("search",this.searchQuery);
					this.getBlogs()
				},
				hideSpinner() {
					const spinner = document.getElementById('spinner');
					spinner.style.display = 'none';
				},
				showSpinner(){
					const spinner = document.getElementById('spinner');
					spinner.style.display = 'block';
				},
				onClickCategory(categoryId,categoryName){
					this.title = `Blogs in Category ${categoryName} - Page ${this.pageNo}`
					this.pageNo = 1
					this.extraParams = `category=${categoryId}`
					this.updateURLParam("category", categoryId);
					this.getBlogs()
				},
				onNextPage() {
					this.pageNo+= 1
					this.onClickPage(this.pageNo)
				},
				onPreviousPage() {
					this.pageNo-= 1
					this.updateURLParam("page", thispageNo);
					this.onClickPage(this.pageNo)
				},
				onClickPage (page) {
					this.title = `${this.title.split('-')[0]} - Page ${page}`
					this.pageNo = page	
					this.updateURLParam("page", page);
					this.getBlogs()
				},
				updateURLParam (key, value) {
					let url = new URL(window.location.href);
					url.search = "";
					if(key && value)
						url.searchParams.set(key, value);
					window.history.pushState({}, "", url); 
				},
				onClickAuthor (authorId,authorName) {
					this.title = `Blogs by Author ${authorName} - Page ${this.pageNo}`
					this.pageNo = 1
					this.extraParams = `author=${authorId}`
					this.updateURLParam("author", authorId);
					this.getBlogs()
				},
				onClickTag (tagId,tagName) {
					this.title = `Blogs Tagged ${tagName} - Page ${this.pageNo}`
					this.pageNo = 1
					this.extraParams = `tag=${tagId}`
					this.updateURLParam("tag", tagId);
					this.getBlogs()
				},
				stripHtmlTags(html) {
					const tmp = document.createElement("div");
					tmp.innerHTML = html;
					return tmp.textContent || tmp.innerText || "";
				},
				getData: function () {
					const self = this;
					$.getJSON('js/config.json', function(result) {
						self.ADMIN_BASE_URL = result['ADMIN_BASE_URL'];
						self.WHATSAPP_PHONE_NUMBER = result['WHATSAPP_PHONE_NUMBER'];
					});
				},
				getCookie: function (name) {
				   const value = `; ${document.cookie}`;
				   const parts = value.split(`; ${name}=`);
				   if (parts.length === 2) {
					   return parts.pop().split(';').shift();
				   }
				   return null; 
				},
				getBlogs: function () {
					this.showSpinner();
					const ref = this;
					$.getJSON(`/api/getBlogs?page=${this.pageNo}&${this.extraParams}`, function(result) {
						ref.allBlogs = result.blogs
						ref.totalPage = Math.ceil(result.total/result.perPage)
						ref.totalPerPage = result.perPage
						if(ref.totalBlogs == 0)
							ref.totalBlogs = result.total
						ref.hideSpinner();
					});
				},
				getBlogAssets: async function () {
					try {
						const response = await fetch('/api/getPublicBlogAssets');
						if (!response.ok) {
							throw new Error(`HTTP error! Status: ${response.status}`);
						}
						const result = await response.json();
						this.blogCategories = result.blogCountPerCategory;
					} catch (error) {
						console.error("Error fetching blog categories:", error);
					}
				},
				getUrlParam(param) {
					let params = new URLSearchParams(window.location.search);
					return params.get(param);
				}
			   },
			   mounted: async function(){
				   this.getData();
				   const accessToken = this.getCookie('accessToken');
				   if(accessToken){
					   this.isLoginSession = true;
				   }
				   await this.getBlogAssets()
				   if(this.getUrlParam('page')) this.onClickPage(this.getUrlParam('page'))
				   else if(this.getUrlParam('author')) this.onClickAuthor(this.getUrlParam('author'))
				   else if(this.getUrlParam('category')) {
						const category = this.blogCategories.find(item => item.id === this.getUrlParam('category'));
						this.onClickCategory(this.getUrlParam('category'),category.name)
					}
					else if(this.getUrlParam('tag')) {
						this.onClickTag(this.getUrlParam('tag'),'');
					}
				   else if(this.getUrlParam('search')) { this.searchQuery = this.getUrlParam('search');  this.onSearch() }
				   else this.getBlogs()
			   }
			}).mount('#app');
	   </script>
	</body>
</html>